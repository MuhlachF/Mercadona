{% extends "base.html" %}

{% block title %}
    Accueil du site Mercadona
{% endblock title %}

{% block content %}
<h1>Le site de Mercadona</h1>

<!-- Menu déroulant pour le filtrage par catégorie -->
<select class="form-select" aria-label="Default select example" id="categorySelector">
    <option selected>Appliquer un filtre selon les catégories</option>
    {% for element in Categories %}    
        <option value="{{element.id}}">{{element.label}}</option>
    {% endfor %}
</select>    

<!-- Tableau pour afficher les articles -->
<table class="table table-striped table-responsive-mg">
    <thead>
        <tr>
            <th scope="col"></th>
            <th scope="col">Désignation</th>
            <th scope="col">Description</th>
            <th scope="col">Catégorie</th>
            <th scope="col">Prix</th>
            <th scope="col">Promotion</th>
        </tr>
    </thead>

    <!-- Affichage des articles dans le tableau -->
{% for article in page_obj %}
    <tr height="100px">
        <td class = "align-middle text-center">
            {% if article.image %}
                <img src="{{ article.image.url }}" alt="{{image.description}}" height ='100px'>
            {% endif %}
        </td>
        <td class = "align-middle" style="font-weight: bold;">
            {{ article.label }}
        </td>
        <td class = "align-middle">
            {{article.description|truncatewords:10}}
        </td>
        <td class = "align-middle">
            {{article.category}}
        </td>

        <td class = "align-middle">
            {% if article.est_en_promotion == False %}
                {{ article.price }}€TTC
            {% else %}      
            <span class="text-decoration-line-through">{{ article.price }}€TTC</span> <span class="text-danger fw-bold">{{ article.retourner_prix }}€TTC </span>
            {% endif %}
        </td>
        <td class = "align-middle">
            {% if article.est_en_promotion == True %}
                <span class="badge rounded-pill text-bg-danger">{{ article.valeur_promotion }}%</span>
            {% endif %}
        </td>
    </tr>
{% endfor %}
</table>

<!-- Pagination -->
<nav aria-label="Page navigation" >
    <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page=1" aria-label="Première page">Première</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Page précédente">Précédente</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">Première</span>
            </li>
            <li class="page-item disabled">
                <span class="page-link">Précédente</span>
            </li>
        {% endif %}

        <li class="page-item disabled">
            <span class="page-link">Page {{ page_obj.number }} sur {{ page_obj.paginator.num_pages }}</span>
        </li>

        {% if page_obj.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Page suivante">Suivante</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}" aria-label="Dernière page">Dernière</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">Suivante</span>
            </li>
            <li class="page-item disabled">
                <span class="page-link">Dernière</span>
            </li>
        {% endif %}
    </ul>
</nav>
{% endblock content %}


